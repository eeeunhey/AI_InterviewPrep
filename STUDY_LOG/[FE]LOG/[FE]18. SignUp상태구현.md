### SignUp 에서 사용자 상태 구현

1. SignUp에서 
  const { updateUser } = useContext(UserContext);
  유저 정보를 업데이트 한다

2. SignUp API 호출 try-catch 작성

---

## 전체 코드

```javascript
// 회원가입 API 호출
try {
  // 이미지가 있을 경우 업로드
  if (profilePic) {
    const imgUploadRes = await uploadImage(profilePic);
    profileImageUrl = imgUploadRes.imageUrl || "";
  }

  const response = await axiosInstance.post(API_PATHS.AUTH.REGISTER, {
    name: fullName,
    email,
    password,
    profileImageUrl,
  });

  const { token } = response.data;

  if (token) {
    localStorage.setItem("token", token);
    updateUser(response.data);
    navigate("/dashboard");
  }

} catch (error) {
  if (error.response && error.response.data.message) {
    setError(error.response.data.massage);
  } else {
    setError("로그인에 실패했습니다. 죄송하지만 다시 시도해주세요");
  }
}
```

---

## 1️⃣ try \~ catch

```javascript
try {
  // (성공 시 실행할 코드들)
} catch (error) {
  // (실패 시 실행할 코드들)
}
```

---

## 2️⃣ 이미지 업로드 (선택 사항)

```javascript
if (profilePic) {
  const imgUploadRes = await uploadImage(profilePic);
  profileImageUrl = imgUploadRes.imageUrl || "";
}
```

* `if (profilePic)` → 사용자가 프로필 이미지를 선택했는지 확인.
* 있으면 `uploadImage(profilePic)` 호출 → 서버에 이미지 업로드.
* 서버가 `imageUrl`을 돌려주면 그 값을 `profileImageUrl`에 저장.
* 없으면 빈 문자열(`""`).

👉 즉, **프로필 사진이 있을 때만 업로드**합니다.
    /utils/uploadImage.js 에 업로드 기능 구현 [FE]19. uploadImage구현.md

---

## 3️⃣ 회원가입 API 호출

```javascript
const response = await axiosInstance.post(API_PATHS.AUTH.REGISTER, {
  name: fullName,
  email,
  password,
  profileImageUrl,
});
```

* `axiosInstance.post` → 회원가입 API 주소로 데이터를 보냄.
* 보낸 데이터:

  * `name`: 이름
  * `email`: 이메일
  * `password`: 비밀번호
  * `profileImageUrl`: 프로필 이미지 주소(있으면 포함, 없으면 빈 문자열)

---

## 4️⃣ 서버 응답에서 토큰 꺼내기

```javascript
const { token } = response.data;
```

* 서버가 회원가입 성공 시 `token`을 줍니다.
* 이 `token`은 로그인 상태를 유지하는 데 쓰이는 인증 증서

---

## 5️⃣ 로그인 성공 처리

```javascript
if (token) {
  localStorage.setItem("token", token);  // 브라우저에 토큰 저장
  updateUser(response.data);             // Context 업데이트 (전역 로그인 상태 반영)
  navigate("/dashboard");                // 대시보드 화면으로 이동
}
```

* 토큰을 `localStorage`에 저장 → 새로고침해도 유지.
* `updateUser` 호출 → Context에 로그인 정보 저장.
* `navigate("/dashboard")` → 회원가입 후 바로 대시보드 페이지로 이동.

---

## 6️⃣ 실패 처리 (catch 블럭)

```javascript
catch (error) {
  if (error.response && error.response.data.message) {
    setError(error.response.data.massage);
  } else {
    setError("로그인에 실패했습니다. 죄송하지만 다시 시도해주세요");
  }
}
```

* 서버가 에러 메시지를 돌려줬다면 → 그대로 화면에 보여줌.
* 그렇지 않다면 → “로그인에 실패했습니다”라는 기본 문구 보여줌.
* (주의: `massage`는 오타 → `message`로 고쳐야 정상 작동합니다 ✅)

---

## ✨ 한 줄 요약

이 코드는 **회원가입 버튼을 눌렀을 때 실행되는 로직**으로,

1. 프로필 사진이 있으면 업로드,
2. 이름/이메일/비밀번호/사진 주소를 서버에 전달,
3. 성공 시 토큰 저장 + 로그인 상태 업데이트 + 대시보드 이동,
4. 실패 시 에러 메시지 표시.

---


