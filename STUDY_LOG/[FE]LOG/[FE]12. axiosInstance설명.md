여기까지 구현이 마무리 되면 이제 Login.jsx 수정
Login.jsx 비워놨던 API 공간에 코드 입력 -> [FE]13. Login API 호출
다음 파일에 상세 기재

📌 axios란?
axios는 자바스크립트에서 HTTP 요청을 쉽게 보내고 받을 수 있게 해주는 라이브러리
브라우저 ↔ 서버 사이에서 데이터를 주고받는 도구

🔄 왜 쓰냐?

원래 브라우저에는 fetch라는 내장 함수가 있어요.
근데 fetch는 기능이 좀 불편하거나 코드가 길어져요.

그래서 사람들이 더 편리하게 쓰려고 만든 게 axios예요.
→ fetch보다 문법이 간단하고, 추가 기능(자동 JSON 변환, 에러 처리, 인터셉터 등)이 들어가 있음.

axiosInstance = "정수기"처럼 집에 설치해둔 물 (주소·카드 다 등록해놔서 바로 컵만 대면 나옴).
즉, 공통으로 필요한 설정을 한 번 해두고 편하게 쓰는 axios예요.

axiosInstance
axiosInstance.get("/users"); // 알아서 baseURL 붙음 → http://localhost:5000/api/users

axios = 기본 요청 도구
axiosInstance = 내가 미리 설정해둔 axios (주소, 헤더, 옵션 자동 적용)
장점: 코드가 짧아지고, 토큰/공통 설정을 자동으로 넣어줌


### 구현코드 설명

1️⃣ axios 인스턴스 생성
import axios from "axios";
import { BASE_URL } from "./apiPaths";

// 공통 axios 인스턴스 생성
const axiosInstance = axios.create({
  baseURL: BASE_URL, // 모든 요청의 기본 URL
  timeout: 80000,    // 요청 제한 시간 (80초)
  headers: {
    "Content-Type": "application/json",
    Accept: "application/json",
  },
});

👉 설명
axios.create()를 사용해 내 전용 axios를 만듭니다.
모든 요청에 자동으로 붙는 기본 주소(baseURL), 타임아웃(80초), **헤더(JSON 전송)**를 설정합니다.
앞으로는 axiosInstance.get("/users")라고만 써도 BASE_URL + "/users"가 호출됩니다.



2️⃣ Request Interceptor (요청 인터셉터)
axiosInstance.interceptors.request.use(
  (config) => {
    const accessToken = localStorage.getItem("token");  
    if (accessToken) {
      // 요청 헤더에 JWT 토큰 자동 추가
      config.headers.Authorization = `Bearer ${accessToken}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

👉 설명
요청이 서버로 나가기 전에 실행되는 코드입니다.
localStorage에 저장된 토큰이 있으면 → Authorization 헤더에 자동 추가됩니다.
예: Authorization: Bearer abc123
덕분에 매번 API 호출할 때 토큰을 직접 붙일 필요가 없습니다.



3️⃣ Response Interceptor (응답 인터셉터)
axiosInstance.interceptors.response.use(
  (response) => response, // 정상 응답은 그대로 반환
  (error) => {
    if (error.response) {
      if (error.response.status === 401) {
        // 인증 실패 → 로그인 페이지로 이동
        window.location.href = "/login";
      } else if (error.response.status === 500) {
        console.error("서버 오류가 발생했습니다. 잠시 후 다시 시도해 주세요.");
      }
    } else if (error.code === "ECONNABORTED") {
      // 요청 시간이 초과되었을 때
      console.error("요청 시간이 초과되었습니다. 다시 시도해 주세요.");
    }
    return Promise.reject(error);
  }
);


👉 설명
서버 응답을 받은 직후 실행됩니다.
성공 응답은 그대로 돌려주고, 실패 응답은 상태 코드에 따라 처리합니다.
401 Unauthorized → 로그인 페이지로 이동
500 Server Error → 콘솔에 에러 메시지 출력
ECONNABORTED → 요청 시간 초과 메시지 출력
마지막에 Promise.reject(error) → 에러를 다시 던져서 호출한 쪽에서 .catch()로 처리할 수 있습니다.



4️⃣ 내보내기
export default axiosInstance;

👉 설명
이 인스턴스를 다른 파일에서 불러 쓸 수 있도록 export 합니다.

예:
import axiosInstance from "./axiosInstance";

axiosInstance.get("/users")
  .then((res) => console.log(res.data))
  .catch((err) => console.error(err));

✅ 전체 요약

axiosInstance 생성 → 기본 URL, 헤더, 타임아웃 설정
Request Interceptor → 요청 나가기 전 토큰 자동 첨부
Response Interceptor → 응답 들어올 때 에러 상황 공통 처리 (401, 500, Timeout)
Export → 다른 파일에서 재사용