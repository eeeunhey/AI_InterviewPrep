
이미지 → 업로드 → URL 받기 → 회원가입
1. 사용자가 파일 선택 → imageFile 상태에 저장
2. handleSignUp 실행
    - 이미지가 있다면 uploadImage(imageFile) 호출
    - 서버가 업로드 성공 시 imageUrl(또는 서버 응답 속성명) 반환

3. 반환받은 profileImageUrl을 회원가입 API 바디에 넣어 AUTH.REGISTER 호출
4. 성공 시 토큰/유저정보 저장 후 페이지 이동, 실패 시 에러 표시







---

## 코드 해석

```js
import { API_PATHS } from "./apiPaths";
import axiosInstance from "./axiosInstance";
```

* `apiPaths.js` 파일에서 API 경로 모음을 가져옵니다. (`API_PATHS.IMAGE.UPLOAD_IMAGE` 같은 걸 쓸 수 있음)
* `axiosInstance.js` 에서 미리 설정해둔 **axios 객체**를 가져옵니다. (baseURL, timeout, interceptor 등이 설정된 버전)

---

```js
const uploadImage = async (imageFile) => {
  const formData = new FormData();
  // 이미지 파일을 폼 데이터에 추가한다
  formData.append("image", imageFile);
```

* `FormData()` : 브라우저 안에서 제공하는 내장 객체
    - HTML에서 <form> 태그를 만들고 파일이나 텍스트를 넣고 submit을 누르면 브라우저가 데이터를 특정 형식(multipart/form-data)으로 묶어서 서버에 보낸다
    - React 같은 SPA(단일 페이지 앱)에서는 보통 <form>을 직접 안 쓰고 자바스크립트 코드로 요청을 보내야하는데 이때 FormData객체를 사용하면 HTML 폼을 만든 것처럼 데이터를 묶어서 보낼 수 있다
    - 일반 JSON으로는 파일을 담을 없기 때문에 FormData 파일과 문자열을 한번에 묶어서 보낼 수 있게 한다
    - 서버에서는 req.file("imgae) , req.body.fileName로 꺼낼 수 있다

        ```
        사용 예시
            const formData = new FormData();
            formData.append("image", file);     // 파일 붙이기
            formData.append("username", "홍길동"); // 문자열 붙이기

            // axios로 전송
            await axios.post("/upload", formData, {
            headers: {
                "Content-Type": "multipart/form-data",
            },
            });

        ```
                파일 + 텍스트가 HTML <form> 전송과 똑같은 방식으로 서버에 전달


* `formData.append("image", imageFile)` : key가 `"image"` 인 필드에 파일 객체를 붙입니다. → 백엔드에서 `request.file("image")` 같은 방식으로 받을 수 있어요.

---

```js
  try {
    const response = await axiosInstance.post(
      API_PATHS.IMAGE.UPLOAD_IMAGE,
      formData,
      {
        headers: {
          "Content-Type": "multipart/form-data", // formData 전송 시 꼭 필요
        },
      }
    );
```

* **`axiosInstance.post`** : 서버로 POST 요청을 보냄.

  * 첫 번째 인자: 업로드 API 주소 (`API_PATHS.IMAGE.UPLOAD_IMAGE`)
  * 두 번째 인자: 보낼 데이터 (`formData`)
  * 세 번째 인자: 요청 설정 (여기선 헤더에 `multipart/form-data` 추가 → 파일 업로드에 필요)

---

```js
    return response.data;
    // axios로 요청하면, axios는 응답을 data에 객체로 저장
```

* 서버 응답 전체(`status`, `headers`, `data`) 중에서 `data`만 꺼내 리턴.
* 보통 우리가 필요한 건 실제 응답 데이터(JSON)이라 `response.data` 만 돌려줍니다.

---

```js
  } catch (error) {
    console.error("이미지 업로드 중 오류 발생: ", error);
    throw error; // 에러를 상위 로직에 전달
  }
};
```

* 업로드 도중 에러가 나면 콘솔에 찍고, `throw error` 로 다시 던집니다.
* 이렇게 하면, 이 함수를 사용하는 쪽(예: 회원가입 페이지)에서 `.catch()` 또는 try-catch 로 후속 처리를 할 수 있어요.

---

```js
export default uploadImage;
```

* `uploadImage` 함수를 다른 파일에서도 쓸 수 있도록 내보냅니다.
* 예: `const imgUrl = await uploadImage(file);`

---

## 정리

이 함수의 역할은
👉 **이미지 파일을 받아서 서버 API로 업로드 요청을 보내고, 성공 시 서버 응답을 리턴, 실패 시 에러를 상위 로직에 전달** 하는 것.

---
