

---

## 📄 코드 설명 (uploadImage.js)

```js
import { API_PATHS } from "./apiPaths";
import axiosInstance from "./axiosInstance";
```

* `API_PATHS` : 서버 주소(API 경로)를 한 곳에서 관리하는 객체.
  → `API_PATHS.IMAGE.UPLOAD_IMAGE` = 실제 업로드 요청을 보낼 URL.
* `axiosInstance` : `axios`(HTTP 요청 라이브러리)를 설정해둔 버전.
  → 기본 주소, 토큰 같은 공통 설정을 미리 해둠.

---

```js
const uploadImage = async (imageFile) => {
```

* `uploadImage`라는 비동기 함수 정의.
* `imageFile` : 사용자가 업로드하려는 실제 이미지 파일(예: 프로필 사진).

---

```js
  const formData = new FormData();
  // 이미지 파일을 폼 데이터에 추가한다
  formData.append("image", imageFile);
```

* `FormData()` : HTML `<form>` 전송 방식을 흉내내는 특별한 객체.
* `formData.append("image", imageFile)` : `image`라는 이름으로 파일을 추가.
  → 서버에서 `req.file` 혹은 `req.body.image`로 읽을 수 있음.

---

```js
  try {
    const response = await axiosInstance.post(
      API_PATHS.IMAGE.UPLOAD_IMAGE,
      formData,
      {
        headers: {
          "Content-Type": "multipart/form-data", // formData 전송 시 꼭 필요
        },
      }
    );
```

* `axiosInstance.post()` : 서버에 **POST 요청**을 보냄.
* 첫 번째 인자: 업로드할 주소(`API_PATHS.IMAGE.UPLOAD_IMAGE`).
* 두 번째 인자: 우리가 만든 `formData` (안에 이미지 파일 포함).
* 세 번째 인자: 요청 헤더 → `multipart/form-data` 방식으로 전송한다고 서버에 알려줌.

---

```js
    return response.data;
    // axios로 요청하면, axios는 응답을 data에 객체로 저장
```

* 서버가 응답한 내용을 `response.data`에 담아서 반환.
  → 이 함수를 호출한 쪽에서 업로드 결과(URL, 성공 여부 등)를 받을 수 있음.

---

```js
  } catch (error) {
    console.error("이미지 업로드 중 오류 발생: ", error);
    throw error; // 에러를 상위 로직에 전달
  }
};
```

* 요청이 실패하면 `catch`로 잡힘.
* 콘솔에 에러를 찍고, `throw error`로 상위 코드(예: 회원가입 함수)에게 알림.
  → 이렇게 해야 “이미지 업로드 실패”를 사용자에게 알려줄 수 있음.

---

```js
export default uploadImage;
```

* 이 파일에서 만든 `uploadImage` 함수를 다른 파일에서도 쓸 수 있게 내보냄.

---

## 📌 초보자용 흐름도

```
사용자가 이미지 선택
       │
       ▼
uploadImage(imageFile) 함수 실행
       │
       ▼
1. FormData 객체 생성
2. 이미지 파일 추가
       │
       ▼
axiosInstance.post() 로 서버에 업로드 요청
       │
       ├── 성공 → response.data 반환 (이미지 URL 등)
       │
       └── 실패 → 콘솔에 에러 출력, 에러 던짐
```

---

✅ **한 줄 요약**
`uploadImage` 함수는 사용자가 선택한 이미지를 `FormData`에 담아서 서버로 보내고, 서버의 응답(JSON)을 돌려주는 역할

---