ìˆœì„œ
1. server.js app.use('api/question', questionRoutes); ì…ë ¥
2. routes/questionRoutes.js controller ê¸°ëŠ¥ í˜¸ì¶œ
3. questioncontroller.js


1. questioncontroller.js_addQuestionsToSession 
ê¸°ì¡´ ì„¸ì…˜(Session)ì— ì§ˆë¬¸ë“¤ì„ ì¶”ê°€í•˜ëŠ” API ì»¨íŠ¸ë¡¤ëŸ¬

ğŸ” ì½”ë“œ í•´ì„
exports.addQuestionsToSession = async (req, res) => {
  try {
    const { sessionId, questions } = req.body;


í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ JSON Bodyì—ì„œ sessionIdì™€ questionsë¥¼ êº¼ëƒ…ë‹ˆë‹¤.
sessionId: ì§ˆë¬¸ì„ ì¶”ê°€í•  ì„¸ì…˜ì˜ ID

questions: [{ question: "...", answer: "..." }, ...] í˜•íƒœì˜ ë°°ì—´

    if (!sessionId || !questions || !Array.isArray(questions)) {
      return res.status(400).json({ message: "invalid input data" });
    }


ìœ íš¨ì„± ê²€ì‚¬
sessionIdê°€ ì—†ê±°ë‚˜
questionsê°€ ë¹„ì–´ìˆê±°ë‚˜
questionsê°€ ë°°ì—´ì´ ì•„ë‹ ê²½ìš°

ì˜ëª»ëœ ìš”ì²­ìœ¼ë¡œ ë³´ê³  400 Bad Request ë°˜í™˜
    const session = await Session.findById(sessionId);

    if (!session) {
      return res.status(404).json({ message: "Session not found" });
    }


MongoDBì—ì„œ í•´ë‹¹ sessionIdë¥¼ ê°€ì§„ ì„¸ì…˜ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
ì—†ìœ¼ë©´ 404 Not Found ë°˜í™˜

    // ìƒˆë¡œìš´ ì§ˆë¬¸ ìƒì„±ì„ ìœ„í•œ ì½”ë“œë¸”ëŸ­
    const createQuestions = await Question.insertMany(
      questions.map((q) => ({
        session: sessionId,
        question: q.question,
        answer: q.answer,
      }))
    );


questions ë°°ì—´ì„ ìˆœíšŒí•˜ë©´ì„œ ê° ì§ˆë¬¸ì„ Question ë¬¸ì„œë¡œ ìƒì„±
session: sessionId â†’ ì–´ë–¤ ì„¸ì…˜ì— ì†í•œ ì§ˆë¬¸ì¸ì§€ ì—°ê²°
question, answer â†’ ì§ˆë¬¸ ë‚´ìš©ê³¼ ë‹µë³€ ì €ì¥
insertMany â†’ ì—¬ëŸ¬ ë¬¸ì„œë¥¼ í•œ ë²ˆì— DBì— ì €ì¥
ê²°ê³¼(createQuestions)ëŠ” ì‹¤ì œë¡œ DBì— ì¶”ê°€ëœ ì§ˆë¬¸ë“¤ì˜ ë°°ì—´

  } catch (error) {
    res.status(500).json({ message: "Server Error" });
  }
};


ì‹¤í–‰ ì¤‘ ì—ëŸ¬ ë°œìƒ ì‹œ 500 Internal Server Error ë°˜í™˜

âœ… í˜„ì¬ ì½”ë“œ ë¬¸ì œ
createQuestionsë¥¼ ë§Œë“¤ì–´ ë†“ì•˜ì§€ë§Œ ì‘ë‹µìœ¼ë¡œ ë‚´ë ¤ì£¼ì§€ ì•ŠìŒ â†’ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¶”ê°€ëœ ì§ˆë¬¸ì„ í™•ì¸í•  ìˆ˜ ì—†ìŒ
ë³´í†µì€ ì•„ë˜ì²˜ëŸ¼ ì‘ë‹µì„ ë‚´ë ¤ì£¼ëŠ” ê²Œ ë§ìŠµë‹ˆë‹¤:
res.status(201).json({
  success: true,
  addedQuestions: createQuestions,
});

ğŸ“Œ ì •ë¦¬

ì´ í•¨ìˆ˜ëŠ”:
í´ë¼ì´ì–¸íŠ¸ì—ì„œ sessionIdì™€ questionsë¥¼ ì…ë ¥ë°›ê³ 
ì„¸ì…˜ì´ ìœ íš¨í•œì§€ í™•ì¸í•œ ë’¤
ì—¬ëŸ¬ ì§ˆë¬¸ì„ í•œêº¼ë²ˆì— DBì— ì €ì¥í•˜ëŠ” ë¡œì§

---


1ï¸âƒ£ togglePinQuestion (ì§ˆë¬¸ ê³ ì •/í•´ì œ)
// @desc ì§ˆë¬¸ì„ ê³ ì •í•˜ê±°ë‚˜ ê³ ì •ì„ í•´ì œí•œë‹¤
// @route POST /api/questions/:id/pin
// @access Private
exports.togglePinQuestion = async (req, res) => {
    try{
      const question = await Question.findById(req.params.id);

      if (!question) {
        return res
          .status(404)
          .json({ success: false, message: "ì§ˆë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" });
      }
    
      // í˜„ì¬ ê°’ ë°˜ì „ (true â†’ false, false â†’ true)
      question.isPinned = !question.isPinned;
      await question.save();

      res.status(200).json({ success: true, question });
    } catch (error) {
        res.status(500).json({ message: "Server Error" });
    }
};

ë™ì‘ ì›ë¦¬

ì§ˆë¬¸ ì°¾ê¸°: req.params.id(URL íŒŒë¼ë¯¸í„°ë¡œ ë°›ì€ ì§ˆë¬¸ ID)ë¥¼ ì´ìš©í•´ DBì—ì„œ ì§ˆë¬¸ì„ ì°¾ìŒ.
ì—†ëŠ” ê²½ìš°: í•´ë‹¹ ì§ˆë¬¸ì´ ì—†ìœ¼ë©´ 404 ì—ëŸ¬ì™€ í•¨ê»˜ "ì§ˆë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ ë°˜í™˜.
ìˆëŠ” ê²½ìš°: isPinned ê°’ì„ ë°˜ëŒ€ë¡œ í† ê¸€ (ê³ ì • â†” í•´ì œ).
ì˜ˆ: false â†’ true, true â†’ false
DB ì €ì¥: ë³€ê²½ëœ ê°’ì„ question.save()ë¡œ ì €ì¥.
ì‘ë‹µ: ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©´ 200 OKì™€ í•¨ê»˜ ì—…ë°ì´íŠ¸ëœ ì§ˆë¬¸ ê°ì²´ ë°˜í™˜.
ğŸ‘‰ ì¦‰, ì§ˆë¬¸ì„ í•œ ë²ˆ ëˆ„ë¥´ë©´ ê³ ì •, ë‹¤ì‹œ ëˆ„ë¥´ë©´ í•´ì œí•˜ëŠ” ê¸°ëŠ¥.



2ï¸âƒ£ updateQuestionNote (ì§ˆë¬¸ ë…¸íŠ¸ ìˆ˜ì •)
// @desc ì§ˆë¬¸ì— ëŒ€í•œ ë…¸íŠ¸ë¥¼ ìˆ˜ì •í•œë‹¤
// @route POST /api/questions/:id/note
// @access Private
exports.updateQuestionNote = async (req, res) => {
    try{
        const { note } = req.body;
        const question = await Question.findById(req.params.id);

        if(!question) {
            return res
              .status(404)
              .json({ success: false, message: "Question not found" });
        }

        // noteê°€ ì—†ìœ¼ë©´ ë¹ˆ ë¬¸ìì—´ë¡œ ì´ˆê¸°í™”
        question.note = note || "";
        await question.save();

        res.status(200).json({ success: true, question });
    } catch (error) {
        res.status(500).json({ message: "Server Error" });
    }
};

ë™ì‘ ì›ë¦¬

note ì¶”ì¶œ: req.bodyì—ì„œ ë…¸íŠ¸ ë‚´ìš©ì„ ê°€ì ¸ì˜´.
ì§ˆë¬¸ ì°¾ê¸°: ë§ˆì°¬ê°€ì§€ë¡œ req.params.idë¥¼ ì´ìš©í•´ DBì—ì„œ ì§ˆë¬¸ ê²€ìƒ‰.
ì—†ëŠ” ê²½ìš°: ì§ˆë¬¸ì´ ì—†ìœ¼ë©´ 404 ì—ëŸ¬ì™€ "Question not found" ë°˜í™˜.
ìˆëŠ” ê²½ìš°: question.note í•„ë“œì— ìƒˆë¡œìš´ note ê°’ ì €ì¥.
ë§Œì•½ ê°’ì´ ì—†ìœ¼ë©´(undefined/null) ë¹ˆ ë¬¸ìì—´("")ë¡œ ì €ì¥.
DB ì €ì¥: question.save()ë¡œ DBì— ì—…ë°ì´íŠ¸.
ì‘ë‹µ: ì„±ê³µí•˜ë©´ 200 OKì™€ í•¨ê»˜ ì—…ë°ì´íŠ¸ëœ ì§ˆë¬¸ ê°ì²´ ë°˜í™˜.
ğŸ‘‰ ì¦‰, íŠ¹ì • ì§ˆë¬¸ì— ëŒ€í•´ ë©”ëª¨/ì„¤ëª…ì„ ë§ë¶™ì´ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ê¸°ëŠ¥.


ğŸ”‘ ìš”ì•½
togglePinQuestion: ì§ˆë¬¸ì˜ ê³ ì • ì—¬ë¶€(isPinned)ë¥¼ í† ê¸€í•˜ëŠ” API.
updateQuestionNote: íŠ¹ì • ì§ˆë¬¸ì— ë©”ëª¨(note)ë¥¼ ì‘ì„±/ìˆ˜ì •í•˜ëŠ” API.
ë‘ API ëª¨ë‘ URLì—ì„œ ì§ˆë¬¸ IDë¥¼ ë°›ì•„ DBì—ì„œ í•´ë‹¹ ì§ˆë¬¸ì„ ì°¾ê³ , ì—†ë‹¤ë©´ 404 ë°˜í™˜.
ì„±ê³µ ì‹œ ìˆ˜ì •ëœ ì§ˆë¬¸ì„ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ë¯€ë¡œ, í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¦‰ì‹œ ë°˜ì˜ ê°€ëŠ¥.